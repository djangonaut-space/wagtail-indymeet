{% load i18n %}
{% load availability_tags %}
<div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
  <div class="flex items-center mb-2">
    {% if membership.user.profile.bio_image %}
      <img src="{{ membership.user.profile.bio_image.url }}" alt="{{ membership.user.get_full_name }}" class="w-12 h-12 rounded-full mr-3">
    {% else %}
      <div class="w-12 h-12 rounded-full bg-purple-200 flex items-center justify-center mr-3">
        <span class="text-purple-700 font-bold text-lg">
          {{ membership.user.first_name|first|upper }}{{ membership.user.last_name|first|upper }}
        </span>
      </div>
    {% endif %}
    <div>
      <p class="font-bold text-gray-900">{{ membership.user.get_full_name }}</p>
      {% if membership.user.profile.pronouns %}
        <p class="text-sm text-gray-600">{{ membership.user.profile.pronouns }}</p>
      {% endif %}
    </div>
  </div>
  <p class="text-sm text-gray-700 mb-2">
    <a href="mailto:{{ membership.user.email }}">
      {{ membership.user.email }}
    </a>
  </p>

  <!-- Availability Section -->
  {% if membership.overlap_slots %}
  <div class="member-availability-overlap mt-3 pt-3 border-t border-gray-200">
    <div class="p-2 bg-green-50 border border-green-200 rounded">
      <p class="text-xs font-bold text-green-800 mb-1">
        <i class="fas fa-check-circle mr-1"></i>{% trans "Overlap with You" %} ({{ timezone }})
      </p>
      <ul class="member-overlap-times text-xs text-green-700 space-y-1">
        {% format_slots_as_list membership.overlap_slots membership.offset_hours as ranges %}
        {% if ranges %}
          {% for range in ranges %}
          <li>{{ range }}</li>
          {% endfor %}
        {% else %}
          <li>No overlap</li>
        {% endif %}
      </ul>
    </div>
  </div>
  {% endif %}

  {% if show_survey_link %}
    <a href="{% url 'djangonaut_survey_response' session_slug=team.session.slug user_id=membership.user.id %}" class="text-sm mt-2 inline-block">
      <i class="fas fa-clipboard-list mr-1"></i>{% trans "View Application" %}
    </a>
  {% endif %}

  <a href="{% url 'compare_availability' %}?session={{ team.session.id }}&users={{ membership.user.id }}" class="text-sm mt-2 inline-block ml-3">
    <i class="fas fa-calendar-alt mr-1"></i>{% trans "Compare Availability" %}
  </a>
</div>
